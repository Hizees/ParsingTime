#!/usr/bin/ruby

require 'execrunner'

# -- DEPENDENCIES --
JAVANLP = "#{ENV['JAVANLP_HOME']}/projects/core/classes:#{ENV['JAVANLP_HOME']}/projects/research/classes"

# -- RUN --
env!( 
	# Program
	'java',
	# Runtime Options
	o('cp', 
		"dist/time.jar:etc/lib.jar:etc/scala-library.jar:etc/scala-compiler.jar:etc/jline.jar:etc/postgresql.jar:#{JAVANLP}:etc/jdom.jar:etc/joda-time.jar"),
	o('Xrunhprof:cpu=samples'),
	o('Xmx500M'),
	o('server'),
	o('ea'),
	'time.Entry',

	run(
		# -- LEARNING --
		selo(0, 'parser', 
			'CKYParser', 
			'SearchParser', 
			'PrimitivesOnly', 
			'ItsAlwaysFriday'),
		o('iters', 10),
		o('maxSearchTime', 10000),
		o('beam', 1),
		# -- EVALUATION --
		o('exactMatchThreshold', 60*60*24), # a day
		o('scoreGranularity', 60*60*24), # a day
		o('c_overconstraining', 1.0),
		o('c_vagueness', 1.0),

		# -- DATA --
		o('train', '1-11'),
		o('dev', '101-111'),
		o('test', '151-152'),
#		o('train', '1-101'),
#		o('dev', '101-151'),
#		o('test', '151-187'),
		o('devTest', true),

		# -- BOOTSTRAPING --
		#(exec options)
#		o('logDebug'),
		o('ignoreClasspath', "\"[#{ENV['JAVANLP_HOME']}/.*,etc/scala-.*.jar,etc/postgres.jar,etc/jdom.jar,etc/joda-time.jar]\""),
		#(logging)
		o('execDir', 'out'),
		o('execOutput', '"psql://research@localhost:time<what?why42?"'),
		#(data)
		o('execData', '"psql://research@localhost:data<what?why42?"'),
	nil),
nil)
